/* Video Editor styles - improved UX */
:root{
  --bg:#0f1724; --card:#0b1220; --muted:#9ca3af; --accent:#3b82f6; --accent-2:#10b981;
  --panel-width:340px; --gutter:16px; --radius:12px;
}
body{font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, Arial; background:#0b1220; color:#e6eef8; margin:0}
.editor-root{display:flex; gap:var(--gutter); padding:20px; height:calc(100vh - 40px)}
.left-assets{width:var(--panel-width); background:linear-gradient(180deg,#071226 0,#071a2b 100%); border-radius:var(--radius); padding:14px; box-shadow:0 6px 18px rgba(2,6,23,0.6); display:flex; flex-direction:column; gap:12px; min-height:0}
.section-title{font-weight:700; color:#dff3ff; margin-bottom:10px}
.asset-section{display:flex; flex-direction:column; gap:8px; flex:1; min-height:0}
.assets-list{display:flex; flex-direction:column; gap:10px; overflow:auto; min-height:0}

/* custom scrollbar for asset lists */
.assets-list::-webkit-scrollbar{width:10px}
.assets-list::-webkit-scrollbar-track{background:transparent}
.assets-list::-webkit-scrollbar-thumb{background:rgba(255,255,255,0.04);border-radius:8px}
.asset-item{display:flex; gap:10px; align-items:center; padding:8px; border-radius:8px; background:linear-gradient(180deg,#071a2b 0,#061421 100%); border:1px solid rgba(255,255,255,0.03); cursor:grab}
.asset-item img{width:64px;height:64px;object-fit:cover;border-radius:6px}
.asset-item .meta{font-size:13px;color:var(--muted)}
.asset-item .small{font-size:12px;color:#88a6c6}
.controls{display:flex; gap:8px}
.btn{background:var(--accent); color:#fff; border:none; padding:8px 12px; border-radius:8px; cursor:pointer; font-weight:600}
.btn.secondary{background:transparent; border:1px solid rgba(255,255,255,0.06)}
.player-area{flex:1; display:flex; flex-direction:column; gap:12px}
.player-top{display:flex; gap:12px}
/* Standard YouTube-friendly preview size: 1280x720 (16:9). We cap at max-width so it scales down on small screens */
:root{ --video-width:1280px; --video-height:720px; }
.preview-player{
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 640px;
}
.canvas-wrap{
  position: relative;
  background: #000;
  border-radius: 12px;
  overflow: hidden;
  /* Fixed portion of screen with 16:9 aspect */
  width: min(75vw, 1200px);
  aspect-ratio: 16 / 9;
  box-shadow: 0 10px 30px rgba(0,0,0,0.5);
}
#editorCanvas{
  width: 100%;
  height: 100%;
  display: block;
}
.preview-overlay{
  position: absolute;
  inset: 0;
  /* allow clicks on handles/boxes; individual elements control pointer-events */
  pointer-events: none;
}
.preview-toolbar{
  position: absolute;
  left: 50%;
  bottom: 10px;
  transform: translateX(-50%);
  display: flex;
  gap: 8px;
  align-items: center;
  background: rgba(0,0,0,0.5);
  border: 1px solid rgba(255,255,255,0.08);
  padding: 8px 10px;
  border-radius: 999px;
  pointer-events: auto;
  backdrop-filter: blur(4px);
}
.time-readout{ font-size: 12px; color: #cfe8ff; margin-left: 6px; }
/* seek slider tweaks */
#seekSlider{ accent-color:#3b82f6; cursor:pointer; width:260px }
/* When crop is disabled during playback */
.preview-toolbar button:disabled{ opacity:0.5; cursor:not-allowed }

/* Selection box and handles */
.selection-box{
  position: absolute;
  border: 1px dashed rgba(255,255,255,0.8);
  box-shadow: 0 0 0 9999px rgba(0,0,0,0.15) inset;
  /* allow its children (handles) to receive events */
  pointer-events: none;
}
.handle{
  position: absolute;
  width: 12px; height: 12px;
  background: #fff;
  border-radius: 50%;
  border: 2px solid #3b82f6;
  box-sizing: border-box;
  pointer-events: auto;
  touch-action: none;
}
.handle.nw{ left: -6px; top: -6px; cursor: nwse-resize; }
.handle.ne{ right: -6px; top: -6px; cursor: nesw-resize; }
.handle.sw{ left: -6px; bottom: -6px; cursor: nesw-resize; }
.handle.se{ right: -6px; bottom: -6px; cursor: nwse-resize; }
.handle.move{ left: 50%; top: 50%; transform: translate(-50%, -50%); cursor: move; background:#3b82f6; opacity:0.6; }

/* Crop overlay */
.crop-box{ position:absolute; border:2px solid rgba(16,185,129,0.9); box-shadow: 0 0 0 9999px rgba(0,0,0,0.4) inset; pointer-events: none; }
.crop-handle{ position:absolute; width: 12px; height: 12px; background:#10b981; border-radius: 2px; pointer-events:auto; touch-action: none; }
.crop-handle.nw{ left:-6px; top:-6px; cursor:nwse-resize }
.crop-handle.ne{ right:-6px; top:-6px; cursor:nesw-resize }
.crop-handle.sw{ left:-6px; bottom:-6px; cursor:nesw-resize }
.crop-handle.se{ right:-6px; bottom:-6px; cursor:nwse-resize }
.crop-handle.move{ left:50%; top:50%; transform: translate(-50%, -50%); width:18px; height:18px; cursor: move; opacity:0.7 }
.inspector{width:320px; background:linear-gradient(180deg,#071226,#061421); border-radius:12px; padding:12px; box-shadow:0 6px 18px rgba(2,6,23,0.6)}
.inspector h4{margin:0 0 8px 0}
.timeline{background:linear-gradient(180deg,#020617,#071226); border-radius:12px; padding:12px}
.timeline{background:linear-gradient(180deg,#020617,#071226); max-width: 2000px; border-radius:12px; padding:12px; display:flex; flex-direction:column; flex:1; min-height:0}
.timeline-header{display:flex; justify-content:space-between; align-items:center; margin-bottom:8px}
.timeline-scale-note{font-size:12px;color:#9fbfdc;margin-bottom:6px}
.timeline-viewport{position:relative; overflow:auto; border-radius:8px; background:transparent; padding:8px; flex:1; min-height:0}
.timeline-ruler{height:28px; background:linear-gradient(180deg,#061226,#04121a); border-radius:6px; margin-bottom:8px; position:relative}
.timeline-track-outer{position:relative; min-height:220px;}
.timeline-track{position:relative; height:auto; min-height:220px}
.timeline-layer{position:relative; background:#061122; border-radius:8px; padding:8px; display:block; min-height:100px; margin-bottom:12px}
/* clips will be absolutely positioned within the layer's clips container (.layer-clips) */
.layer-clips{position:relative; min-height:68px}
.timeline-layer .clip{position:absolute; left:0; top:0; width:120px; height:68px; cursor:grab}
.timeline-layer .clip.dragging{opacity:0.7; cursor:grabbing}
.timeline-ruler .tick{position:absolute; top:0; height:100%; border-right:1px solid rgba(255,255,255,0.04); color:#9fbfdc; font-size:11px; display:flex; align-items:center; justify-content:center}
.clip-handle{position:absolute; right:0; top:0; width:8px; height:100%; cursor:ew-resize; background:linear-gradient(90deg, rgba(255,255,255,0.02), transparent)}
.clip-resizing{opacity:0.9}
.btn.small{padding:4px 8px;font-size:13px}
.layer-header{display:flex; align-items:center; gap:8px; margin-bottom:6px}
.layer-chip{background:linear-gradient(180deg,#071226,#081722); padding:6px 8px; border-radius:8px; font-weight:700}
.timeline-layer{position:relative; background:#061122; border-radius:8px; padding:12px 8px 8px 8px; display:block; min-height:100px; margin-bottom:12px}
.layer-header{z-index:3; position:relative}
.clip{display:flex; align-items:center; gap:8px; min-width:120px; height:68px; background:linear-gradient(180deg,#0e2940,#082036); border-radius:8px; padding:8px; border:1px solid rgba(255,255,255,0.03); position:relative; z-index:1}
.clip img{width:88px; height:68px; object-fit:cover; border-radius:6px}
.clip .info{display:flex; flex-direction:column}
.duration-badge{position:absolute; right:8px; top:8px; background:rgba(0,0,0,0.45); padding:4px 8px; border-radius:6px; font-weight:600}
.clip .remove{position:absolute; left:8px; top:8px; background:rgba(255,0,0,0.18); padding:6px 8px; border-radius:8px; cursor:pointer; color:#fff; font-weight:700; z-index:5; box-shadow:0 4px 10px rgba(0,0,0,0.45)}
.clip img{display:block}
/* ensure remove is visible even over images */
.clip img + .remove, .clip > .remove { z-index:5 }
/* force pointer events so clicks reach the remove control */
.clip .remove { pointer-events: auto }
.start-badge{position:absolute; left:8px; bottom:8px; background:rgba(0,0,0,0.28); padding:4px 6px; border-radius:6px; font-weight:600; font-size:12px}
.footer-actions{display:flex; gap:8px; justify-content:flex-end; margin-top:8px}
/* responsive */
@media(max-width:900px){.editor-root{flex-direction:column;height:auto}.left-assets{width:100%;order:2}.inspector{width:100%}.preview-player{min-height:220px}}

/* Loading Modal */
.loading-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(11, 18, 32, 0.95);
  backdrop-filter: blur(8px);
  z-index: 10000;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, Arial;
}

.loading-content {
  background: linear-gradient(180deg, #071226 0%, #071a2b 100%);
  border-radius: 16px;
  padding: 40px;
  box-shadow: 0 20px 40px rgba(2, 6, 23, 0.8);
  border: 1px solid rgba(255, 255, 255, 0.06);
  min-width: 400px;
  text-align: center;
}

.loading-spinner {
  width: 50px;
  height: 50px;
  border: 4px solid rgba(255, 255, 255, 0.1);
  border-left-color: #3b82f6;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin: 0 auto 20px;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.loading-title {
  font-size: 24px;
  font-weight: 700;
  color: #dff3ff;
  margin-bottom: 12px;
}

.loading-status {
  font-size: 16px;
  color: #9fd2ff;
  margin-bottom: 24px;
  min-height: 20px;
}

.loading-progress {
  display: flex;
  align-items: center;
  gap: 12px;
}

.progress-bar {
  flex: 1;
  height: 8px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 4px;
  overflow: hidden;
}

.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #3b82f6, #10b981);
  width: 0%;
  transition: width 0.3s ease;
}

.progress-text {
  font-size: 14px;
  font-weight: 600;
  color: #dff3ff;
  min-width: 40px;
}
