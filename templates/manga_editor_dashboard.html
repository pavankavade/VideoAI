<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Manga Editor Dashboard</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/static/ui.build.css?v=1" />
  <style>
    *{box-sizing:border-box}
    body{font-family:Inter,system-ui,Segoe UI,Arial,sans-serif;background:#020617;position:relative}
    body::before{content:'';position:fixed;top:0;left:0;right:0;height:400px;background:radial-gradient(ellipse at top,rgba(59,130,246,0.15),transparent 60%);pointer-events:none;z-index:0}
    .main-content{position:relative;z-index:1}
    /* Fallback component styles (used if /static/ui.build.css is missing) */
    .btn{display:inline-flex;align-items:center;justify-content:center;border:none;border-radius:8px;background:#3b82f6;color:#fff;padding:10px 16px;font-weight:600;cursor:pointer;transition:all 0.2s ease;gap:6px}
    .btn:hover{background:#2563eb;transform:translateY(-1px);box-shadow:0 4px 12px rgba(59,130,246,0.3)}
    .btn.secondary{background:#1e293b;color:#e5e7eb;border:1px solid #334155}
    .btn.secondary:hover{background:#334155;border-color:#475569;box-shadow:0 4px 12px rgba(51,65,85,0.3)}
    .btn-primary{background:linear-gradient(135deg,#3b82f6,#2563eb);box-shadow:0 2px 8px rgba(59,130,246,0.2)}
    .btn-primary:hover{box-shadow:0 4px 16px rgba(59,130,246,0.4)}
    .card{background:linear-gradient(135deg,rgba(14,26,49,0.6),rgba(11,23,45,0.8));border:1px solid rgba(59,130,246,0.2);border-radius:16px;backdrop-filter:blur(10px);box-shadow:0 4px 24px rgba(0,0,0,0.3)}
    .card-header{background:linear-gradient(135deg,rgba(30,41,59,0.8),rgba(15,23,42,0.9));border-bottom:1px solid rgba(59,130,246,0.2);border-radius:16px 16px 0 0}
    .input,.select,.textarea{background:rgba(11,23,45,0.6);border:1px solid rgba(51,65,85,0.8);color:#e6f0ff;border-radius:8px;padding:10px 12px;transition:all 0.2s ease}
    .input:focus,.select:focus,.textarea:focus{border-color:#3b82f6;box-shadow:0 0 0 3px rgba(59,130,246,0.1);outline:none}
    .status-pill{font-size:11px;padding:4px 10px;border-radius:12px;display:inline-block;font-weight:600;text-transform:uppercase;letter-spacing:0.5px}
    .ok{background:rgba(16,185,129,0.2);color:#34d399;border:1px solid rgba(16,185,129,0.3)}
    .warn{background:rgba(245,158,11,0.2);color:#fbbf24;border:1px solid rgba(245,158,11,0.3)}
    .project-row{transition:all 0.2s ease;border-bottom:1px solid rgba(51,65,85,0.2)}
    .project-row:hover{background:rgba(59,130,246,0.05);transform:scale(1.005)}
    .project-row:last-child{border-bottom:none}
    .actions{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
    .actions .btn{font-size:13px;padding:8px 14px}
    .page-title{font-size:32px;font-weight:700;background:linear-gradient(135deg,#e2e8f0,#94a3b8);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
    .table-header{background:linear-gradient(135deg,rgba(30,41,59,0.6),rgba(15,23,42,0.8));backdrop-filter:blur(5px);border-bottom:1px solid rgba(59,130,246,0.15)}
    .modal-overlay{backdrop-filter:blur(12px);animation:fadeIn 0.2s ease}
    .modal-card{background:linear-gradient(135deg,rgba(14,26,49,0.98),rgba(11,23,45,0.98));border:1px solid rgba(59,130,246,0.4);box-shadow:0 20px 60px rgba(0,0,0,0.6);animation:slideUp 0.3s ease}
    @keyframes fadeIn{from{opacity:0}to{opacity:1}}
    @keyframes slideUp{from{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}
    @keyframes spin{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}
    .file-drop-area{border:2px dashed rgba(59,130,246,0.4);border-radius:12px;background:rgba(11,23,45,0.5);transition:all 0.2s ease}
    .file-drop-area:hover{border-color:#3b82f6;background:rgba(59,130,246,0.08);transform:translateY(-2px)}
    .modal-header-icon{width:48px;height:48px;border-radius:12px;background:linear-gradient(135deg,#3b82f6,#2563eb);display:flex;align-items:center;justify-content:center;box-shadow:0 4px 12px rgba(59,130,246,0.4)}
    .input-wrapper{position:relative}
    .input-label{font-weight:600;margin-bottom:10px;color:#cbd5e1;font-size:14px;display:block;letter-spacing:0.3px}
  </style>
  <script src="/static/manga_editor_dashboard_new.js?v=2.5"></script>
  <script>
    // Optional: allow visiting /editor/dashboard?old=1 to go back
  </script>
  <script>
    // Small hydration to set base URL if needed later
    window.__APP__ = { };
  </script>
</head>
<body>
  <div class="main-content">
    <div class="container mx-auto" style="padding:40px 20px;max-width:1400px">
      <!-- Header Card -->
      <div class="card card-header flex items-center justify-between" style="padding:32px 40px;margin-bottom:32px;box-shadow:0 8px 32px rgba(0,0,0,0.4)">
        <div>
          <h1 class="page-title" style="margin-bottom:8px">Manga Editor Dashboard</h1>
          <p style="color:#94a3b8;font-size:14px;margin:0">Manage your manga series and chapters</p>
        </div>
        <div class="flex gap-3 items-center" style="flex-shrink:0;margin-left:40px">
          <a href="/mangadex/viewer" class="btn secondary" style="text-decoration:none">
            <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
            </svg>
            MangaDex Explorer
          </a>
          <button class="btn btn-primary" id="btnAddManga">
            <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24"><path d="M12 5v14M5 12h14"/></svg>
            New Manga
          </button>
          <button class="btn secondary" id="btnAddStandaloneProject">
            <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24"><path d="M12 5v14M5 12h14"/></svg>
            Standalone Project
          </button>
        </div>
      </div>

      <!-- Manga Series Section -->
      <div id="mangaSeriesSection" class="mb-8">
        <h2 style="color:#e2e8f0;font-size:20px;font-weight:700;margin-bottom:16px;display:flex;align-items:center;gap:10px">
          <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/></svg>
          Manga Series
        </h2>
        <div id="seriesList"></div>
      </div>

      <!-- Standalone Projects Table Card -->
      <div id="standaloneSection">
        <h2 style="color:#e2e8f0;font-size:20px;font-weight:700;margin-bottom:16px;display:flex;align-items:center;gap:10px">
          <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M9 12h6M9 16h6M17 21H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg>
          Standalone Projects
        </h2>
        <div class="card overflow-hidden" style="box-shadow:0 8px 32px rgba(0,0,0,0.4)">
          <table class="w-full border-collapse" style="border-spacing:0">
            <thead>
              <tr class="table-header text-slate-300">
                <th class="text-left" style="padding:20px 24px;font-weight:600;font-size:13px;text-transform:uppercase;letter-spacing:1px">
                  <div style="display:flex;align-items:center;gap:8px">
                    <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M9 12h6M9 16h6M17 21H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg>
                    Title
                  </div>
                </th>
                <th class="text-left" style="padding:20px 24px;font-weight:600;font-size:13px;text-transform:uppercase;letter-spacing:1px">
                  <div style="display:flex;align-items:center;gap:8px">
                    <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"/></svg>
                    Status
                  </div>
                </th>
                <th class="text-left" style="padding:20px 24px;font-weight:600;font-size:13px;text-transform:uppercase;letter-spacing:1px">
                  <div style="display:flex;align-items:center;gap:8px">
                    <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>
                    Created
                  </div>
                </th>
                <th class="text-left" style="padding:20px 24px;font-weight:600;font-size:13px;text-transform:uppercase;letter-spacing:1px">
                  <div style="display:flex;align-items:center;gap:8px">
                    <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"/></svg>
                    Actions
                  </div>
                </th>
              </tr>
            </thead>
            <tbody id="editorDashBody">
              <tr><td colspan="4" class="text-slate-400 p-4 text-center" style="font-size:14px">
                <div style="padding:40px 0">
                  <svg width="48" height="48" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" style="margin:0 auto 12px;opacity:0.3"><path d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"/></svg>
                  <div style="opacity:0.6">Loading projectsâ€¦</div>
                </div>
              </td></tr>
            </tbody>
          </table>
        </div>
      </div>      <!-- Empty State (will be handled by JS but styled here) -->
      <style>
        .empty-state{text-align:center;padding:60px 20px;color:#94a3b8}
        .empty-state svg{margin:0 auto 16px;opacity:0.4}
        .series-card{background:linear-gradient(135deg,rgba(14,26,49,0.7),rgba(11,23,45,0.9));border:1px solid rgba(59,130,246,0.25);border-radius:12px;margin-bottom:16px;overflow:hidden;transition:all 0.2s ease}
        .series-card:hover{border-color:rgba(59,130,246,0.4);box-shadow:0 4px 16px rgba(59,130,246,0.15)}
        .series-header{padding:20px 24px;cursor:pointer;display:flex;align-items:center;justify-content:space-between;background:linear-gradient(135deg,rgba(30,41,59,0.5),rgba(15,23,42,0.7))}
        .series-header:hover{background:linear-gradient(135deg,rgba(30,41,59,0.7),rgba(15,23,42,0.9))}
        .series-content{display:none;padding:0}
        .series-content.expanded{display:block}
        .chapter-row{padding:16px 24px;border-top:1px solid rgba(51,65,85,0.3);display:flex;align-items:center;justify-content:space-between;transition:all 0.2s ease}
        .chapter-row:hover{background:rgba(59,130,246,0.05)}
        .chevron{transition:transform 0.2s ease}
        .chevron.expanded{transform:rotate(90deg)}
      </style>
    </div>

    <!-- Create Manga Series Modal -->
    <div id="createMangaBox" class="modal-overlay hidden fixed inset-0 items-center justify-center z-50" style="background:rgba(0,0,0,0.75)">
      <div class="modal-card w-[500px] max-w-[95%]" style="border-radius:24px;padding:0;overflow:hidden">
        <div style="background:linear-gradient(135deg,rgba(30,41,59,0.9),rgba(15,23,42,0.95));padding:28px 32px;border-bottom:1px solid rgba(59,130,246,0.2)">
          <div class="flex items-center justify-between">
            <div style="display:flex;align-items:center;gap:16px">
              <div class="modal-header-icon">
                <svg width="24" height="24" fill="none" stroke="white" stroke-width="2.5" viewBox="0 0 24 24"><path d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/></svg>
              </div>
              <div>
                <div style="font-size:20px;font-weight:700;color:#e2e8f0;margin-bottom:4px">Create New Manga</div>
                <div style="font-size:13px;color:#94a3b8">Start a new manga series</div>
              </div>
            </div>
            <button class="btn secondary" id="closeCreateManga" style="border-radius:10px;padding:10px;min-width:auto">
              <svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24"><path d="M6 18L18 6M6 6l12 12"/></svg>
            </button>
          </div>
        </div>
        <div style="padding:32px">
          <div class="input-wrapper">
            <label class="input-label">Manga Name</label>
            <input id="mangaName" class="input w-full" placeholder="Enter manga series name..." style="font-size:15px;padding:12px 16px;height:auto" />
          </div>
        </div>
        <div style="background:rgba(15,23,42,0.5);padding:20px 32px;border-top:1px solid rgba(59,130,246,0.1);display:flex;gap:12px;justify-content:flex-end">
          <button class="btn secondary" id="cancelCreateManga" style="padding:12px 24px;font-size:14px">Cancel</button>
          <button class="btn btn-primary" id="saveCreateManga" style="padding:12px 28px;font-size:14px">
            <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24"><path d="M5 13l4 4L19 7"/></svg>
            Create Manga
          </button>
        </div>
      </div>
    </div>

    <!-- Add Chapter Modal -->
    <div id="addChapterBox" class="modal-overlay hidden fixed inset-0 items-center justify-center z-50" style="background:rgba(0,0,0,0.75)">
      <div class="modal-card w-[600px] max-w-[95%]" style="border-radius:24px;padding:0;overflow:hidden">
        <div style="background:linear-gradient(135deg,rgba(30,41,59,0.9),rgba(15,23,42,0.95));padding:28px 32px;border-bottom:1px solid rgba(59,130,246,0.2)">
          <div class="flex items-center justify-between">
            <div style="display:flex;align-items:center;gap:16px">
              <div class="modal-header-icon">
                <svg width="24" height="24" fill="none" stroke="white" stroke-width="2.5" viewBox="0 0 24 24"><path d="M12 5v14M5 12h14"/></svg>
              </div>
              <div>
                <div style="font-size:20px;font-weight:700;color:#e2e8f0;margin-bottom:4px">Add New Chapter</div>
                <div style="font-size:13px;color:#94a3b8" id="chapterSeriesName"></div>
              </div>
            </div>
            <button class="btn secondary" id="closeAddChapter" style="border-radius:10px;padding:10px;min-width:auto">
              <svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24"><path d="M6 18L18 6M6 6l12 12"/></svg>
            </button>
          </div>
        </div>
        <div style="padding:32px">
          <div class="flex flex-col gap-5">
            <div class="input-wrapper">
              <label class="input-label">Chapter Number</label>
              <input id="chapterNumber" type="number" min="1" class="input w-full" placeholder="1" style="font-size:15px;padding:12px 16px;height:auto" />
            </div>
            <div class="input-wrapper">
              <label class="input-label">Chapter Title</label>
              <input id="chapterTitle" class="input w-full" placeholder="Enter chapter title..." style="font-size:15px;padding:12px 16px;height:auto" />
            </div>
            <div class="input-wrapper">
              <label class="input-label">Page Images</label>
              <div id="chapterFileArea" class="file-drop-area text-center cursor-pointer" style="padding:40px 24px">
                <input id="chapterFileInput" type="file" accept="image/*" multiple class="hidden" />
                <svg width="56" height="56" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" style="margin:0 auto 16px;opacity:0.5;color:#3b82f6"><path d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"/></svg>
                <div style="color:#e2e8f0;margin-bottom:8px;font-size:16px;font-weight:600">Drop your images here</div>
                <div style="font-size:13px;color:#94a3b8">or click to browse files</div>
                <div style="font-size:12px;color:#64748b;margin-top:8px">Supports PNG, JPG, WEBP</div>
              </div>
              <div id="chapterFileList" style="margin-top:16px;max-height:200px;overflow-y:auto"></div>
            </div>
          </div>
        </div>
        <div style="background:rgba(15,23,42,0.5);padding:20px 32px;border-top:1px solid rgba(59,130,246,0.1);display:flex;gap:12px;justify-content:flex-end">
          <button class="btn secondary" id="cancelAddChapter" style="padding:12px 24px;font-size:14px">Cancel</button>
          <button class="btn btn-primary" id="saveAddChapter" style="padding:12px 28px;font-size:14px">
            <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24"><path d="M5 13l4 4L19 7"/></svg>
            Add Chapter
          </button>
        </div>
      </div>
    </div>

    <!-- Create Project Modal -->
    <div id="createBox" class="modal-overlay hidden fixed inset-0 items-center justify-center z-50" style="background:rgba(0,0,0,0.75)">
      <div class="modal-card w-[600px] max-w-[95%]" style="border-radius:24px;padding:0;overflow:hidden">
        <!-- Modal Header -->
        <div style="background:linear-gradient(135deg,rgba(30,41,59,0.9),rgba(15,23,42,0.95));padding:28px 32px;border-bottom:1px solid rgba(59,130,246,0.2)">
          <div class="flex items-center justify-between">
            <div style="display:flex;align-items:center;gap:16px">
              <div class="modal-header-icon">
                <svg width="24" height="24" fill="none" stroke="white" stroke-width="2.5" viewBox="0 0 24 24"><path d="M12 5v14M5 12h14"/></svg>
              </div>
              <div>
                <div style="font-size:20px;font-weight:700;color:#e2e8f0;margin-bottom:4px">Create New Project</div>
                <div style="font-size:13px;color:#94a3b8">Upload manga pages to get started</div>
              </div>
            </div>
            <button class="btn secondary" id="closeCreate" style="border-radius:10px;padding:10px;min-width:auto">
              <svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24"><path d="M6 18L18 6M6 6l12 12"/></svg>
            </button>
          </div>
        </div>
        
        <!-- Modal Body -->
        <div style="padding:32px">
          <div class="flex flex-col gap-5">
            <div class="input-wrapper">
              <label class="input-label">Project Title</label>
              <input id="cpTitle" class="input w-full" placeholder="Enter a memorable title..." style="font-size:15px;padding:12px 16px;height:auto" />
            </div>
            
            <div class="input-wrapper">
              <label class="input-label">Page Images</label>
              <div id="editorFileArea" class="file-drop-area text-center cursor-pointer" style="padding:40px 24px">
                <input id="editorFileInput" type="file" accept="image/*" multiple class="hidden" />
                <svg width="56" height="56" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" style="margin:0 auto 16px;opacity:0.5;color:#3b82f6"><path d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"/></svg>
                <div style="color:#e2e8f0;margin-bottom:8px;font-size:16px;font-weight:600">Drop your images here</div>
                <div style="font-size:13px;color:#94a3b8">or click to browse files</div>
                <div style="font-size:12px;color:#64748b;margin-top:8px">Supports PNG, JPG, WEBP</div>
              </div>
              <div id="editorFileList" style="margin-top:16px;max-height:200px;overflow-y:auto"></div>
            </div>
          </div>
        </div>
        
        <!-- Modal Footer -->
        <div style="background:rgba(15,23,42,0.5);padding:20px 32px;border-top:1px solid rgba(59,130,246,0.1);display:flex;gap:12px;justify-content:flex-end">
          <button class="btn secondary" id="cancelCreate" style="padding:12px 24px;font-size:14px">
            Cancel
          </button>
          <button class="btn btn-primary" id="saveCreate" style="padding:12px 28px;font-size:14px">
            <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24"><path d="M5 13l4 4L19 7"/></svg>
            Create Project
          </button>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
